{% extends "base.html" %}

{% block content %}
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-lg-12">
        <h2>Exercises</h2>
        <div class="row my-3">
          <div class="col-md-6">
            <form action="" method="GET">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Search exercises..." name="search" value="{{ search }}">
                <div class="input-group-append">
                  <button href="{{ url_for('routes.exercises') }}?search=search" class="btn btn-outline-secondary" type="submit">Search</button>
                </div>
              </div>
            </form>
          </div>
          <div class="col-md-6 text-right">
            <a href="{{ url_for('routes.create_exercise') }}" class="btn btn-primary">Add Exercise</a>
            <button class="btn btn-secondary dropdown-toggle" type="button" id="sortDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Sort By {{ sort_by|default('ID') }}
            </button>
            <div class="dropdown-menu" aria-labelledby="sortDropdown">
              <a class="dropdown-item" href="{{ url_for('routes.exercises') }}?sort_by=tags">Tags</a>
              <a class="dropdown-item" href="{{ url_for('routes.exercises') }}?sort_by=type">Type</a>
              <a class="dropdown-item" href="{{ url_for('routes.exercises') }}?sort_by=question">Question</a>
              <a class="dropdown-item" href="{{ url_for('routes.exercises') }}?sort_by=answer">Answer</a>
              <a class="dropdown-item" href="{{ url_for('routes.exercises') }}?sort_by=hint">Hint</a>
            </div>
          </div>
        </div>
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Tags</th>
              <th scope="col">Type</th>
              <th scope="col">Question</th>
              <th scope="col">Answer</th>
              <th scope="col">Hint</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for exercise in exercises %}
            <tr>
              <th scope="row">{% if exercise.tags==None %}â€”{% else %}{{ exercise.tags }}{% endif %}</th>
              <td>{{ exercise.type }}</td>
              <td>{{ exercise.question }}</td>
              <td>{{ exercise.answer }}</td>
              <td>{{ exercise.hint }}</td>
              <td>
                <div class="btn-group" role="group">
                    <a href="{{ url_for('routes.edit_exercise', exercise_id=exercise.id) }}" class="btn btn-primary btn-sm">Edit</a>
                    <a href="{{ url_for('routes.copy_exercise', exercise_id=exercise.id) }}" class="btn btn-info btn-sm">Copy</a>
                    <a href="{{ url_for('routes.delete_exercise', exercise_id=exercise.id) }}" class="btn btn-danger btn-sm">Delete</a>
                </div>                
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}

